(()=>{"use strict";var e={};(()=>{e.d=(t,n)=>{for(var r in n){if(e.o(n,r)&&!e.o(t,r)){Object.defineProperty(t,r,{enumerable:true,get:n[r]})}}}})();(()=>{e.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})();(()=>{e.r=e=>{if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(e,"__esModule",{value:true})}})();if(typeof e!=="undefined")e.ab=__dirname+"/";var t={};e.r(t);e.d(t,{default:()=>rehypeExternalLinks});const n=-1;const r=0;const o=1;const s=2;const c=3;const i=4;const a=5;const u=6;const f=7;const l=8;const p=typeof self==="object"?self:globalThis;const deserializer=(e,t)=>{const as=(t,n)=>{e.set(n,t);return t};const unpair=d=>{if(e.has(d))return e.get(d);const[y,g]=t[d];switch(y){case r:case n:return as(g,d);case o:{const e=as([],d);for(const t of g)e.push(unpair(t));return e}case s:{const e=as({},d);for(const[t,n]of g)e[unpair(t)]=unpair(n);return e}case c:return as(new Date(g),d);case i:{const{source:e,flags:t}=g;return as(new RegExp(e,t),d)}case a:{const e=as(new Map,d);for(const[t,n]of g)e.set(unpair(t),unpair(n));return e}case u:{const e=as(new Set,d);for(const t of g)e.add(unpair(t));return e}case f:{const{name:e,message:t}=g;return as(new p[e](t),d)}case l:return as(BigInt(g),d);case"BigInt":return as(Object(BigInt(g)),d)}return as(new p[y](g),d)};return unpair};const deserialize=e=>deserializer(new Map,e)(0);const d="";const{toString:y}={};const{keys:g}=Object;const typeOf=e=>{const t=typeof e;if(t!=="object"||!e)return[r,t];const n=y.call(e).slice(8,-1);switch(n){case"Array":return[o,d];case"Object":return[s,d];case"Date":return[c,d];case"RegExp":return[i,d];case"Map":return[a,d];case"Set":return[u,d]}if(n.includes("Array"))return[o,n];if(n.includes("Error"))return[f,n];return[s,n]};const shouldSkip=([e,t])=>e===r&&(t==="function"||t==="symbol");const serializer=(e,t,f,p)=>{const as=(e,t)=>{const n=p.push(e)-1;f.set(t,n);return n};const pair=p=>{if(f.has(p))return f.get(p);let[d,y]=typeOf(p);switch(d){case r:{let t=p;switch(y){case"bigint":d=l;t=p.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+y);t=null;break;case"undefined":return as([n],p)}return as([d,t],p)}case o:{if(y)return as([y,[...p]],p);const e=[];const t=as([d,e],p);for(const t of p)e.push(pair(t));return t}case s:{if(y){switch(y){case"BigInt":return as([y,p.toString()],p);case"Boolean":case"Number":case"String":return as([y,p.valueOf()],p)}}if(t&&"toJSON"in p)return pair(p.toJSON());const n=[];const r=as([d,n],p);for(const t of g(p)){if(e||!shouldSkip(typeOf(p[t])))n.push([pair(t),pair(p[t])])}return r}case c:return as([d,p.toISOString()],p);case i:{const{source:e,flags:t}=p;return as([d,{source:e,flags:t}],p)}case a:{const t=[];const n=as([d,t],p);for(const[n,r]of p){if(e||!(shouldSkip(typeOf(n))||shouldSkip(typeOf(r))))t.push([pair(n),pair(r)])}return n}case u:{const t=[];const n=as([d,t],p);for(const n of p){if(e||!shouldSkip(typeOf(n)))t.push(pair(n))}return n}}const{message:h}=p;return as([d,{name:y,message:h}],p)};return pair};const serialize=(e,{json:t,lossy:n}={})=>{const r=[];return serializer(!(t||n),!!t,new Map,r)(e),r};const h=typeof structuredClone==="function"?(e,t)=>t&&("json"in t||"lossy"in t)?deserialize(serialize(e,t)):structuredClone(e):(e,t)=>deserialize(serialize(e,t));const isElement=function(e,t,n,r,o){const s=convertElement(t);if(n!==null&&n!==undefined&&(typeof n!=="number"||n<0||n===Number.POSITIVE_INFINITY)){throw new Error("Expected positive finite `index`")}if(r!==null&&r!==undefined&&(!r.type||!r.children)){throw new Error("Expected valid `parent`")}if((n===null||n===undefined)!==(r===null||r===undefined)){throw new Error("Expected both `index` and `parent`")}return looksLikeAnElement(e)?s.call(o,e,n,r):false};const convertElement=function(e){if(e===null||e===undefined){return lib_element}if(typeof e==="string"){return tagNameFactory(e)}if(typeof e==="object"){return anyFactory(e)}if(typeof e==="function"){return castFactory(e)}throw new Error("Expected function, string, or array as `test`")};function anyFactory(e){const t=[];let n=-1;while(++n<e.length){t[n]=convertElement(e[n])}return castFactory(any);function any(...e){let n=-1;while(++n<t.length){if(t[n].apply(this,e))return true}return false}}function tagNameFactory(e){return castFactory(tagName);function tagName(t){return t.tagName===e}}function castFactory(e){return check;function check(t,n,r){return Boolean(looksLikeAnElement(t)&&e.call(this,t,typeof n==="number"?n:undefined,r||undefined))}}function lib_element(e){return Boolean(e&&typeof e==="object"&&"type"in e&&e.type==="element"&&"tagName"in e&&typeof e.tagName==="string")}function looksLikeAnElement(e){return e!==null&&typeof e==="object"&&"type"in e&&"tagName"in e}const m=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/;const b=/^[a-zA-Z]:\\/;function isAbsoluteUrl(e){if(typeof e!=="string"){throw new TypeError(`Expected a \`string\`, got \`${typeof e}\``)}if(b.test(e)){return false}return m.test(e)}function parse(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function stringify(e){return e.join(" ").trim()}const w=require("../unist-util-visit");const N=["http","https"];const E=["nofollow"];const S={};function rehypeExternalLinks(e){const t=e||S;const n=t.protocols||N;const r=convertElement(t.test);return function(e){(0,w.visit)(e,"element",(function(e,o,s){if(e.tagName==="a"&&typeof e.properties.href==="string"&&r(e,o,s)){const r=e.properties.href;if(isAbsoluteUrl(r)?n.includes(r.slice(0,r.indexOf(":"))):r.startsWith("//")){const n=createIfNeeded(t.content,e);const r=n&&!Array.isArray(n)?[n]:n;const o=createIfNeeded(t.rel,e)||E;const s=typeof o==="string"?parse(o):o;const c=createIfNeeded(t.target,e);const i=createIfNeeded(t.properties,e);if(i){Object.assign(e.properties,h(i))}if(s.length>0){e.properties.rel=[...s]}if(c){e.properties.target=c}if(r){const n=createIfNeeded(t.contentProperties,e)||{};e.children.push({type:"element",tagName:"span",properties:h(n),children:h(r)})}}}}))}}function createIfNeeded(e,t){return typeof e==="function"?e(t):e}module.exports=t})();